<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Dashboard</title>-->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--    <style>-->
<!--        body {-->
<!--            padding-top: 20px;-->
<!--        }-->
<!--        .product {-->
<!--            background: #f9f9f9;-->
<!--            border: 1px solid #ddd;-->
<!--            padding: 10px;-->
<!--            margin: 10px;-->
<!--            width: 250px;   /* Fixed width */-->
<!--            height: 420px;  /* Adjusted height to accommodate image */-->
<!--            overflow: hidden; /* Ensures the content does not exceed the div size */-->
<!--            display: flex;-->
<!--            flex-direction: column;-->
<!--            justify-content: space-between;-->
<!--        }-->
<!--        .container {-->
<!--            max-width: 800px;-->
<!--            margin: auto;-->
<!--        }-->
<!--        .logout-button {-->
<!--            position: fixed;-->
<!--            top: 20px;-->
<!--            right: 20px;-->
<!--            z-index: 1000; /* Ensures it's above other elements */-->
<!--        }-->
<!--        img.product-image {-->
<!--            width: 100%; /* Ensure the image fits within the product div */-->
<!--            height: 150px; /* Fixed height for images */-->
<!--            object-fit: cover; /* Ensures image covers the space nicely */-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--    <div class="container">-->
<!--        <h2>Welcome admin</h2>-->
<!--        <input type="text" id="searchInput" onkeyup="searchProducts()" placeholder="Search for products.." class="form-control mb-3">-->
<!--        <div id="productList" class="d-flex flex-wrap justify-content-start"></div>-->
<!--    </div>-->
<!--    <button onclick="window.location.href='/logout'" class="btn btn-danger logout-button">Logout</button>-->

<!--    <script>-->
<!--        document.addEventListener('DOMContentLoaded', function() {-->
<!--            fetch('/products')-->
<!--            .then(response => response.json())-->
<!--            .then(data => {-->
<!--                const productList = document.getElementById('productList');-->
<!--                data.forEach(product => {-->
<!--                    const productDiv = document.createElement('div');-->
<!--                    productDiv.classList.add('col-md-4');-->
<!--                    productDiv.style.flex = 'none';  /* Prevents flex-grow */-->
<!--                    productDiv.innerHTML = `-->
<!--                        <div class="product">-->
<!--                            <img src="${product.images[0]}" alt="Product Image" class="product-image">-->
<!--                            <h5>${product.title}</h5>-->
<!--                            <p>Category: ${product.category}</p>-->
<!--                            <p>Price: $${product.price}</p>-->
<!--                            <p>Description: ${product.description}</p>-->
<!--                        </div>-->
<!--                    `;-->
<!--                    productList.appendChild(productDiv);-->
<!--                });-->
<!--            });-->
<!--        });-->

<!--        function searchProducts() {-->
<!--            let input = document.getElementById('searchInput').value;-->
<!--            input = input.toLowerCase();-->
<!--            let productDivs = document.getElementById('productList').getElementsByClassName('product');-->

<!--            for (i = 0; i < productDivs.length; i++) {-->
<!--                if (!productDivs[i].innerHTML.toLowerCase().includes(input)) {-->
<!--                    productDivs[i].parentNode.style.display = "none";-->
<!--                } else {-->
<!--                    productDivs[i].parentNode.style.display = "block";-->
<!--                }-->
<!--            }-->
<!--        }-->
<!--    </script>-->
<!--</body>-->
<!--</html>-->


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            padding-top: 20px;
        }
        .product {
            background: #f9f9f9;
            border: 1px solid #ddd;
            padding: 10px;
            margin: 10px;
            width: 250px;   /* Fixed width */
            height: 420px;  /* Adjusted height to accommodate image */
            overflow: hidden; /* Ensures the content does not exceed the div size */
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .container {
            max-width: 800px;
            margin: auto;
        }
        .logout-button {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000; /* Ensures it's above other elements */
        }
        img.product-image {
            width: 100%; /* Ensure the image fits within the product div */
            height: 150px; /* Fixed height for images */
            object-fit: cover; /* Ensures image covers the space nicely */
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Welcome admin</h2>
        <input type="text" id="searchInput" onkeyup="searchProducts()" placeholder="Search for products.." class="form-control mb-3">
        <div id="productList" class="d-flex flex-wrap justify-content-start"></div>
    </div>
    <button onclick="window.location.href='/logout'" class="btn btn-danger logout-button">Logout</button>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            fetch('/products')
            .then(response => response.json())
            .then(data => {
                const productList = document.getElementById('productList');
                if (data.products && Array.isArray(data.products)) {
                    data.products.forEach(product => {
                        const productDiv = document.createElement('div');
                        productDiv.classList.add('col-md-4');
                        productDiv.style.flex = 'none';  /* Prevents flex-grow */
                        productDiv.innerHTML = `
                            <div class="product">
                                <img src="${product.images ? product.images[0] : 'placeholder.jpg'}" alt="Product Image" class="product-image">
                                <h5>${product.title}</h5>
                                <p>Category: ${product.category}</p>
                                <p>Price: $${product.price}</p>
                                <p>Description: ${product.description}</p>
                            </div>
                        `;
                        productList.appendChild(productDiv);
                    });
                } else {
                    console.error('Unexpected response structure:', data);
                }
            })
            .catch(error => console.error('Error fetching products:', error));
        });

        function searchProducts() {
            let input = document.getElementById('searchInput').value;
            input = input.toLowerCase();
            let productDivs = document.getElementById('productList').getElementsByClassName('product');

            for (let i = 0; i < productDivs.length; i++) {
                if (!productDivs[i].innerHTML.toLowerCase().includes(input)) {
                    productDivs[i].parentNode.style.display = "none";
                } else {
                    productDivs[i].parentNode.style.display = "block";
                }
            }
        }
    </script>
</body>
</html>
